"use strict";(self["webpackChunklexeon_admin"]=self["webpackChunklexeon_admin"]||[]).push([[817],{9817:function(t,s,e){e.r(s),e.d(s,{default:function(){return l}});var a=function(){var t=this,s=t._self._c;return s("div",{staticClass:"app-content"},[s("div",{staticClass:"container"},[s("div",{staticClass:"page-title"},[s("h1",[t._v("Заказы")]),s("div",{staticClass:"actions"},[s("button",{staticClass:"btn btn-success",on:{click:function(s){return t.savePage()}}},[s("span",{staticClass:"fas fa-save"}),t._v(" Сохранить ")])])]),s("div",{staticClass:"page-content"},[t.saveInProgress?s("div",{staticClass:"progress"},[s("div",{staticClass:"progress-bar progress-bar-striped progress-bar-animated",staticStyle:{width:"100%"},attrs:{role:"progressbar"}})]):t._e(),s("div",{staticClass:"input-group"},[s("span",{staticClass:"input-group-text"},[t._v("Поиск")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Номер заказа"},domProps:{value:t.query},on:{input:function(s){s.target.composing||(t.query=s.target.value)}}})]),t.isSavedSuccess?s("div",{staticClass:"alert alert-success",attrs:{role:"alert"}},[t._v(" Изменения успешно сохранены ")]):t._e(),t.orders.length?t._e():s("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[t._v(" На данный момент, заказы отсутствуют =( ")]),t.orders.length?s("div",{staticClass:"orders-table"},[s("table",{staticClass:"table table-hover border"},[t._m(0),s("tbody",t._l(t.filteredProducts[t.paginationSelectedPage],(function(e,a){return s("tr",{key:a},[s("td",[t._v(t._s(e.id))]),s("td",{staticClass:"time"},[t._v(t._s(e.date))]),s("td",{staticClass:"items"},t._l(e.products,(function(e,a){return s("div",{key:a,staticClass:"item",staticStyle:{display:"flex","align-items":"center"}},[s("span",{staticClass:"name"},[t._v(t._s(e.name["ua"]))]),s("span",{staticClass:"count badge bg-primary",staticStyle:{"margin-left":"5px"}},[t._v(t._s(e.count))])])})),0),s("td",{staticClass:"info"},[s("p",[t._v("Имя: "),s("span",[t._v(t._s(e.name))])]),s("p",[t._v("Телефон: "),s("span",[t._v(t._s(e.phone))])]),s("p",[t._v("Email: "),s("span",[t._v(t._s(e.email.length?e.email:"ー"))])])]),s("td",{staticClass:"price"},[s("span",[t._v(t._s(e.totalPrice))]),t._v(" грн")]),s("td",{staticClass:"status"},[s("div",{staticClass:"form-check form-switch"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.status.ready,expression:"order.status.ready"}],staticClass:"form-check-input",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.status.ready)?t._i(e.status.ready,null)>-1:e.status.ready},on:{change:function(s){var a=e.status.ready,r=s.target,i=!!r.checked;if(Array.isArray(a)){var c=null,n=t._i(a,c);r.checked?n<0&&t.$set(e.status,"ready",a.concat([c])):n>-1&&t.$set(e.status,"ready",a.slice(0,n).concat(a.slice(n+1)))}else t.$set(e.status,"ready",i)}}}),s("label",{staticClass:"form-check-label"},[t._v("Собран")])]),s("div",{staticClass:"form-check form-switch"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.status.send,expression:"order.status.send"}],staticClass:"form-check-input",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.status.send)?t._i(e.status.send,null)>-1:e.status.send},on:{change:function(s){var a=e.status.send,r=s.target,i=!!r.checked;if(Array.isArray(a)){var c=null,n=t._i(a,c);r.checked?n<0&&t.$set(e.status,"send",a.concat([c])):n>-1&&t.$set(e.status,"send",a.slice(0,n).concat(a.slice(n+1)))}else t.$set(e.status,"send",i)}}}),s("label",{staticClass:"form-check-label"},[t._v("Отправлен")])]),s("div",{staticClass:"form-check form-switch"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.status.done,expression:"order.status.done"}],staticClass:"form-check-input",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.status.done)?t._i(e.status.done,null)>-1:e.status.done},on:{change:function(s){var a=e.status.done,r=s.target,i=!!r.checked;if(Array.isArray(a)){var c=null,n=t._i(a,c);r.checked?n<0&&t.$set(e.status,"done",a.concat([c])):n>-1&&t.$set(e.status,"done",a.slice(0,n).concat(a.slice(n+1)))}else t.$set(e.status,"done",i)}}}),s("label",{staticClass:"form-check-label"},[t._v("Выполнен")])]),s("div",{staticClass:"form-check form-switch"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.status.payed,expression:"order.status.payed"}],staticClass:"form-check-input",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.status.payed)?t._i(e.status.payed,null)>-1:e.status.payed},on:{change:function(s){var a=e.status.payed,r=s.target,i=!!r.checked;if(Array.isArray(a)){var c=null,n=t._i(a,c);r.checked?n<0&&t.$set(e.status,"payed",a.concat([c])):n>-1&&t.$set(e.status,"payed",a.slice(0,n).concat(a.slice(n+1)))}else t.$set(e.status,"payed",i)}}}),s("label",{staticClass:"form-check-label"},[t._v("Оплачен")])]),s("div",{staticClass:"note"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.note,expression:"order.note"}],staticClass:"form-control",attrs:{placeholder:"Примечание"},domProps:{value:e.note},on:{input:function(s){s.target.composing||t.$set(e,"note",s.target.value)}}})])])])})),0)]),s("nav",[s("ul",{staticClass:"pagination justify-content-end"},[s("li",{staticClass:"page-item",class:{disabled:0==t.paginationSelectedPage}},[s("a",{staticClass:"page-link",on:{click:function(s){return t.paginationController(t.paginationSelectedPage-1)}}},[t._v("Назад")])]),t._l(t.filteredProducts,(function(e,a){return s("li",{key:a,staticClass:"page-item",class:{active:a==t.paginationSelectedPage},on:{click:function(s){return t.paginationController(a)}}},[s("a",{staticClass:"page-link"},[t._v(t._s(a+1))])])})),s("li",{staticClass:"page-item",class:{disabled:t.paginationSelectedPage==t.filteredProducts.length-1}},[s("a",{staticClass:"page-link",on:{click:function(s){return t.paginationController(t.paginationSelectedPage+1)}}},[t._v("Вперед")])])],2)])]):t._e()])])])},r=[function(){var t=this,s=t._self._c;return s("thead",[s("tr",[s("th",[t._v("ID")]),s("th",[t._v("Время")]),s("th",[t._v("Товары (кол-во)")]),s("th",[t._v("Данные")]),s("th",[t._v("Сумма")]),s("th",[t._v("Статус")])])])}],i=(e(7658),{data(){return{orders:[],saveInProgress:!1,isSavedSuccess:!1,query:"",paginationSelectedPage:0,productsPerPage:12}},components:{},computed:{ordersInfo(){return this.$store.getters["getOrders"]},filteredProducts(){for(var t=0,s=[[]],e=this.query.length?this.orders.filter((t=>~t.id.indexOf(this.query.toLowerCase()))):this.orders,a=0;a<e.length;a++)a%this.productsPerPage==0&&0!=a&&(t++,s[t]=[]),s[t].push(e[a]);return s}},watch:{ordersInfo(t){this.orders=t}},methods:{savePage(){this.saveInProgress=!0,this.$store.dispatch("saveOrdersPage",this.orders).then((()=>{this.saveInProgress=!1,this.isSavedSuccess=!0,setTimeout((()=>{this.isSavedSuccess=!1}),3e3)}))},paginationController(t){this.paginationSelectedPage=t,window.scrollTo({top:0,behavior:"smooth"})}},created(){this.orders=this.ordersInfo}}),c=i,n=e(1001),o=(0,n.Z)(c,a,r,!1,null,null,null),l=o.exports}}]);
//# sourceMappingURL=817.4bf7cab6.js.map