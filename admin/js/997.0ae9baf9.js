"use strict";(self["webpackChunklexeon_admin"]=self["webpackChunklexeon_admin"]||[]).push([[997],{4997:function(t,e,s){s.r(e),s.d(e,{default:function(){return d}});var o=function(){var t=this,e=t._self._c;return Object.keys(t.productInfo).length?e("div",{staticClass:"app-content"},[e("div",{staticClass:"container"},[e("div",{staticClass:"page-title"},[e("h1",[t._v(t._s(t.productInfo.name.ua))]),e("div",{staticClass:"actions"},[e("button",{staticClass:"btn btn-success",on:{click:function(e){return t.savePage()}}},[e("span",{staticClass:"fas fa-save"}),t._v(" Сохранить ")])])]),e("div",{staticClass:"page-content"},[t.saveInProgress?e("div",{staticClass:"progress"},[e("div",{staticClass:"progress-bar progress-bar-striped progress-bar-animated",staticStyle:{width:"100%"},attrs:{role:"progressbar"}})]):t._e(),t.isSavedSuccess?e("div",{staticClass:"alert alert-success",attrs:{role:"alert"}},[t._v(" Изменения успешно сохранены ")]):t._e(),t.isFieldsEmpty?e("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[t._v(" Заполните все поля ")]):t._e(),e("div",{staticClass:"product-section"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-3"},[e("div",{staticClass:"image"},[e("img",{staticClass:"shadow rounded",attrs:{src:t.productInfo.image}})])]),e("div",{staticClass:"col-9"},[e("div",{staticClass:"info"},[e("fieldset",[e("legend",[t._v("Общая информация")]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-4"},[e("label",{staticClass:"form-label"},[t._v("Артикул")]),e("div",{staticClass:"input-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.productInfo.code,expression:"productInfo.code"}],staticClass:"form-control",attrs:{type:"number",disabled:""},domProps:{value:t.productInfo.code},on:{input:function(e){e.target.composing||t.$set(t.productInfo,"code",e.target.value)}}})])]),e("div",{staticClass:"col-4"},[e("label",{staticClass:"form-label"},[t._v("Стоимость")]),e("div",{staticClass:"input-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.productInfo.cost,expression:"productInfo.cost"}],staticClass:"form-control",attrs:{type:"number"},domProps:{value:t.productInfo.cost},on:{input:function(e){e.target.composing||t.$set(t.productInfo,"cost",e.target.value)}}})])]),e("div",{staticClass:"col-4"},[e("label",{staticClass:"form-label"},[t._v("Наличие")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.productInfo.isAvailable,expression:"productInfo.isAvailable"}],staticClass:"form-select",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.productInfo,"isAvailable",e.target.multiple?s:s[0])}}},[e("option",{domProps:{value:!0}},[t._v("В наличии")]),e("option",{domProps:{value:!1}},[t._v("Нет в наличии")])])]),e("div",{staticClass:"col-12"},[e("label",{staticClass:"form-label"},[t._v("Наименование")]),e("InputLangGroup",{attrs:{content:t.productInfo.name},model:{value:t.productInfo.name,callback:function(e){t.$set(t.productInfo,"name",e)},expression:"productInfo.name"}})],1),e("div",{staticClass:"col-12"},[e("label",{staticClass:"form-label"},[t._v("Фото товара")]),e("div",{staticClass:"input-group mb-3"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.productInfo.image,expression:"productInfo.image"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Ссылка на фото"},domProps:{value:t.productInfo.image},on:{input:function(e){e.target.composing||t.$set(t.productInfo,"image",e.target.value)}}})])])])]),e("fieldset",[e("legend",[t._v("Категория")]),e("div",{staticClass:"row"},[e("div",{staticClass:"col"},[e("div",{staticClass:"input-group"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.productInfo.category,expression:"productInfo.category"}],staticClass:"form-select",attrs:{disabled:""},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.productInfo,"category",e.target.multiple?s:s[0])}}},t._l(t.categories,(function(s,o){return e("option",{key:o,domProps:{value:s.id}},[t._v(t._s(s.name.ua))])})),0)])])])]),t.currentCategory?e("fieldset",[e("legend",[t._v("Опции")]),e("div",{staticClass:"row"},[e("div",{staticClass:"col"},[e("ul",{staticClass:"list-group list-group-flush"},t._l(t.productInfo.options,(function(s,o){return e("li",{key:o,staticClass:"list-group-item"},[e("strong",[t._v(t._s(t.getFilterName(s).option)+": ")]),e("span",[t._v(t._s(t.getFilterName(s).filter))]),e("span",{staticClass:"badge bg-danger rounded",on:{click:function(e){return t.delleteFilter(o)}}},[e("span",{staticClass:"fas fa-times"})])])})),0),e("div",{staticClass:"input-group"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedFilter,expression:"selectedFilter"}],staticClass:"form-select",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selectedFilter=e.target.multiple?s:s[0]}}},t._l(t.currentCategory.list,(function(s,o){return e("optgroup",{key:o,attrs:{label:s.name.ua}},t._l(s.list,(function(s,o){return e("option",{key:o,domProps:{value:s.id}},[t._v(t._s(s.name.ua))])})),0)})),0),e("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.addFilter()}}},[t._v("Добавить")])])])])]):t._e(),t.productInfo.characteristics.length?e("fieldset",[e("legend",[t._v("Характеристики")]),e("div",{staticClass:"row"},[e("div",{staticClass:"col"},t._l(t.productInfo.characteristics,(function(s,o){return e("div",{key:o,staticClass:"input-group"},[e("span",{staticClass:"input-group-text"},[t._v(t._s(s.name["ua"]))]),e("span",{staticClass:"input-group-text"},[t._v("UA")]),e("input",{directives:[{name:"model",rawName:"v-model",value:s.value["ua"],expression:"item.value['ua']"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:s.value["ua"]},on:{input:function(e){e.target.composing||t.$set(s.value,"ua",e.target.value)}}}),e("span",{staticClass:"input-group-text"},[t._v("RU")]),e("input",{directives:[{name:"model",rawName:"v-model",value:s.value["ru"],expression:"item.value['ru']"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:s.value["ru"]},on:{input:function(e){e.target.composing||t.$set(s.value,"ru",e.target.value)}}}),e("span",{staticClass:"input-group-text"},[t._v("EN")]),e("input",{directives:[{name:"model",rawName:"v-model",value:s.value["en"],expression:"item.value['en']"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:s.value["en"]},on:{input:function(e){e.target.composing||t.$set(s.value,"en",e.target.value)}}}),e("button",{staticClass:"btn btn-danger",on:{click:function(e){return t.delleteCharacteristic(o)}}},[e("span",{staticClass:"fas fa-trash"})])])})),0)])]):t._e(),e("fieldset",[e("legend",[t._v("Описание товара UA")]),e("div",{staticClass:"row"},[e("div",{staticClass:"col"},[e("Editor",{ref:"productDescriptionUA",attrs:{selector:"productInfoEditorUA",buttons:"bold, italic, underline, ul, ol, link, undo, redo"}})],1)])]),e("fieldset",[e("legend",[t._v("Описание товара RU")]),e("div",{staticClass:"row"},[e("div",{staticClass:"col"},[e("Editor",{ref:"productDescriptionRU",attrs:{selector:"productInfoEditorRU",buttons:"bold, italic, underline, ul, ol, link, undo, redo"}})],1)])]),e("fieldset",[e("legend",[t._v("Описание товара EN")]),e("div",{staticClass:"row"},[e("div",{staticClass:"col"},[e("Editor",{ref:"productDescriptionEN",attrs:{selector:"productInfoEditorEN",buttons:"bold, italic, underline, ul, ol, link, undo, redo"}})],1)])])])])])])])])]):t._e()},i=[],r=(s(7658),s(4310)),a=s(7289),n={data(){return{productInfo:{},saveInProgress:!1,isSavedSuccess:!1,isNewProduct:!1,isFieldsEmpty:!1,qrCode:null,selectedFilter:""}},components:{Editor:r.Z,InputLangGroup:a.Z},computed:{productId(){return this.$route.params.id},product(){return this.$store.getters["getProducts"].filter((t=>t.code==this.productId))[0]},categories(){return this.$store.getters["getCategories"]},currentCategory(){return!!this.productInfo.category.length&&this.categories.filter((t=>t.id==this.productInfo.category))[0]}},watch:{product(t){this.productInfo=t,setTimeout((()=>{this.$refs.productDescriptionUA.setContent(this.productInfo.description["ua"]),this.$refs.productDescriptionRU.setContent(this.productInfo.description["ru"]),this.$refs.productDescriptionEN.setContent(this.productInfo.description["en"])}),1e3)}},methods:{getFilterName(t){for(var e=0;e<this.currentCategory.list.length;e++)for(var s=0;s<this.currentCategory.list[e].list.length;s++)if(this.currentCategory.list[e].list[s].id==t)return{option:this.currentCategory.list[e].name["ua"],filter:this.currentCategory.list[e].list[s].name["ua"]}},delleteFilter(t){this.productInfo.options.splice(t,1)},delleteCharacteristic(t){this.productInfo.characteristics.splice(t,1)},addFilter(){if(this.selectedFilter.length&&-1==this.productInfo.options.indexOf(this.selectedFilter)){this.productInfo.options.push(this.selectedFilter);let t=this.selectedFilter.slice(0,-2);this.selectedFilter="";let e=!1;for(let s=0;s<this.productInfo.characteristics.length;s++)if(this.productInfo.characteristics[s].id==t)return void(e=!0);e||this.productInfo.characteristics.push({id:this.$store.getters["getOptionById"](t)["id"],name:this.$store.getters["getOptionById"](t)["name"],value:{ua:"",ru:"",en:""}})}},savePage(){this.productInfo.description.ua=this.$refs.productDescriptionUA.getContent(),this.productInfo.description.ru=this.$refs.productDescriptionRU.getContent(),this.productInfo.description.en=this.$refs.productDescriptionEN.getContent(),this.productInfo.code&&this.productInfo.name&&this.productInfo.cost&&this.productInfo.image&&this.productInfo.description&&this.productInfo.options.length?(this.saveInProgress=!0,this.$store.dispatch("saveProductPage",this.productInfo).then((()=>{this.saveInProgress=!1,this.isSavedSuccess=!0,setTimeout((()=>{this.isSavedSuccess=!1}),3e3)}))):(this.isFieldsEmpty=!0,setTimeout((()=>{this.isFieldsEmpty=!1}),3e3))}},created:function(){},mounted:function(){this.productInfo=this.product,this.productInfo.description&&setTimeout((()=>{this.$refs.productDescriptionUA.setContent(this.productInfo.description["ua"]),this.$refs.productDescriptionRU.setContent(this.productInfo.description["ru"]),this.$refs.productDescriptionEN.setContent(this.productInfo.description["en"])}),1e3)}},c=n,l=s(1001),u=(0,l.Z)(c,o,i,!1,null,null,null),d=u.exports}}]);
//# sourceMappingURL=997.0ae9baf9.js.map